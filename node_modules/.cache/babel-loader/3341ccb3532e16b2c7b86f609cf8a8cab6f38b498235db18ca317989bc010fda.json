{"ast":null,"code":"var _jsxFileName = \"c:\\\\New folder (2)\\\\src\\\\components\\\\LayoutCanvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LayoutCanvas({\n  zoneW,\n  zoneH,\n  polygonPoints,\n  closed,\n  placements,\n  margin\n}) {\n  _s();\n  const ref = useRef(),\n    scale = 50;\n  useEffect(() => {\n    const c = ref.current,\n      ctx = c.getContext('2d');\n    c.width = zoneW * scale;\n    c.height = zoneH * scale;\n    ctx.clearRect(0, 0, c.width, c.height);\n\n    // draw polygon & vertices\n    if (polygonPoints.length) {\n      ctx.strokeStyle = '#0066CC';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      polygonPoints.forEach((p, i) => {\n        const X = p.x * scale,\n          Y = p.y * scale;\n        i === 0 ? ctx.moveTo(X, Y) : ctx.lineTo(X, Y);\n      });\n      if (closed) ctx.closePath();\n      ctx.stroke();\n      polygonPoints.forEach(p => {\n        ctx.fillStyle = '#0066CC';\n        ctx.beginPath();\n        ctx.arc(p.x * scale, p.y * scale, 4, 0, 2 * Math.PI);\n        ctx.fill();\n      });\n    }\n\n    // draw margin around polygon\n    if (closed) {\n      ctx.setLineDash([6, 4]);\n      ctx.strokeStyle = '#F00';\n      ctx.lineWidth = 2;\n      polygonPoints.forEach((p, i) => {\n        const next = polygonPoints[(i + 1) % polygonPoints.length];\n        const dx = next.x - p.x,\n          dy = next.y - p.y;\n        const len = Math.hypot(dx, dy);\n        const ux = dx / len,\n          uy = dy / len;\n        // offset each edge outward by margin\n        ctx.beginPath();\n        const ox = -uy * margin * scale,\n          oy = ux * margin * scale;\n        ctx.moveTo(p.x * scale + ox, p.y * scale + oy);\n        ctx.lineTo(next.x * scale + ox, next.y * scale + oy);\n        ctx.stroke();\n      });\n      ctx.setLineDash([]);\n    }\n\n    // draw tiles & tile corner points\n    placements.forEach(t => {\n      const x = t.x * scale,\n        y = t.y * scale;\n      const w = t.width * scale,\n        h = t.height * scale;\n      ctx.fillStyle = '#DDD';\n      ctx.strokeStyle = '#000';\n      ctx.lineWidth = 1;\n      ctx.fillRect(x, y, w, h);\n      ctx.strokeRect(x, y, w, h);\n      // corner dots\n      [[0, 0], [w, 0], [w, h], [0, h]].forEach(([dx, dy]) => {\n        ctx.fillStyle = '#000';\n        ctx.beginPath();\n        ctx.arc(x + dx, y + dy, 3, 0, 2 * Math.PI);\n        ctx.fill();\n      });\n    });\n  }, [zoneW, zoneH, polygonPoints, closed, placements, margin]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: ref,\n    style: {\n      border: '1px solid #333',\n      marginTop: 20\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 10\n  }, this);\n}\n_s(LayoutCanvas, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n_c = LayoutCanvas;\nvar _c;\n$RefreshReg$(_c, \"LayoutCanvas\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","LayoutCanvas","zoneW","zoneH","polygonPoints","closed","placements","margin","_s","ref","scale","c","current","ctx","getContext","width","height","clearRect","length","strokeStyle","lineWidth","beginPath","forEach","p","i","X","x","Y","y","moveTo","lineTo","closePath","stroke","fillStyle","arc","Math","PI","fill","setLineDash","next","dx","dy","len","hypot","ux","uy","ox","oy","t","w","h","fillRect","strokeRect","style","border","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["c:/New folder (2)/src/components/LayoutCanvas.js"],"sourcesContent":["import React, {useRef,useEffect} from 'react';\r\n\r\nexport default function LayoutCanvas({\r\n  zoneW, zoneH, polygonPoints, closed,\r\n  placements, margin\r\n}) {\r\n  const ref=useRef(), scale=50;\r\n  useEffect(()=>{\r\n    const c=ref.current,ctx=c.getContext('2d');\r\n    c.width=zoneW*scale; c.height=zoneH*scale;\r\n    ctx.clearRect(0,0,c.width,c.height);\r\n\r\n    // draw polygon & vertices\r\n    if(polygonPoints.length){\r\n      ctx.strokeStyle='#0066CC';ctx.lineWidth=2;\r\n      ctx.beginPath();\r\n      polygonPoints.forEach((p,i)=>{\r\n        const X=p.x*scale, Y=p.y*scale;\r\n        i===0?ctx.moveTo(X,Y):ctx.lineTo(X,Y);\r\n      });\r\n      if(closed)ctx.closePath();ctx.stroke();\r\n      polygonPoints.forEach(p=>{\r\n        ctx.fillStyle='#0066CC';\r\n        ctx.beginPath();\r\n        ctx.arc(p.x*scale,p.y*scale,4,0,2*Math.PI);\r\n        ctx.fill();\r\n      });\r\n    }\r\n\r\n    // draw margin around polygon\r\n    if(closed){\r\n      ctx.setLineDash([6,4]);\r\n      ctx.strokeStyle='#F00';ctx.lineWidth=2;\r\n      polygonPoints.forEach((p,i)=>{\r\n        const next=polygonPoints[(i+1)%polygonPoints.length];\r\n        const dx=next.x-p.x, dy=next.y-p.y;\r\n        const len=Math.hypot(dx,dy);\r\n        const ux=dx/len, uy=dy/len;\r\n        // offset each edge outward by margin\r\n        ctx.beginPath();\r\n        const ox = -uy*margin*scale, oy = ux*margin*scale;\r\n        ctx.moveTo(p.x*scale+ox, p.y*scale+oy);\r\n        ctx.lineTo(next.x*scale+ox, next.y*scale+oy);\r\n        ctx.stroke();\r\n      });\r\n      ctx.setLineDash([]);\r\n    }\r\n\r\n    // draw tiles & tile corner points\r\n    placements.forEach(t=>{\r\n      const x=t.x*scale, y=t.y*scale;\r\n      const w=t.width*scale, h=t.height*scale;\r\n      ctx.fillStyle='#DDD';ctx.strokeStyle='#000';ctx.lineWidth=1;\r\n      ctx.fillRect(x,y,w,h);ctx.strokeRect(x,y,w,h);\r\n      // corner dots\r\n      [[0,0],[w,0],[w,h],[0,h]].forEach(([dx,dy])=>{\r\n        ctx.fillStyle='#000';\r\n        ctx.beginPath();\r\n        ctx.arc(x+dx,y+dy,3,0,2*Math.PI);\r\n        ctx.fill();\r\n      });\r\n    });\r\n\r\n  },[zoneW,zoneH,polygonPoints,closed,placements,margin]);\r\n\r\n  return <canvas ref={ref} style={{border:'1px solid #333',marginTop:20}}/>;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}